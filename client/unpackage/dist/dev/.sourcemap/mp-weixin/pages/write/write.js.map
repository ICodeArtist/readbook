{"version":3,"sources":["webpack:///E:/A/my/readbook/client/main.js","webpack:///E:/A/my/readbook/client/pages/write/write.vue","webpack:///E:/A/my/readbook/client/pages/write/write.vue?bc0e","webpack:///E:/A/my/readbook/client/pages/write/write.vue?9c50","webpack:///../../../../A/my/readbook/client/pages/write/write.vue","webpack:///E:/A/my/readbook/client/pages/write/write.vue?344d"],"names":["Page","App"],"mappings":";;;;;;;;;;AAAA;AACA;AACI,kJ;AACAA,IAAI,CAAC,+BAAYC,cAAZ,CAAD,CAAJ,C;;;;;;;;;;;;ACHJ;AAAA;AAAA;AAAA;AAAA;AAAoF;AAC3B;AACL;;;AAGpD;AACkJ;AAClJ,gBAAgB,uJAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACtCf;AAAA;AAAA;AAAA;AAAo0B,CAAgB,+xBAAG,EAAC,C;;;;;;;;;;;;ACAx1B;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC+CA,sN;AACA;AACA,qH;AACA;AACA;AACA,iCADA,EADA;;AAIA,MAJA,kBAIA;AACA;AACA,yCADA;AAEA,kBAFA;AAGA,eAHA;AAIA,iBAJA;AAKA,sBALA;AAMA,uBANA;AAOA,oBAPA;;AASA,sBATA;AAUA,yBAVA;AAWA,uBAXA;AAYA;AACA,qBAbA;;AAeA,GApBA;AAqBA;AACA;AACA;AACA,KAFA,EAEA,IAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CADA;AAEA,mBAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAbA;;AAeA,GA9CA;AA+CA;AACA;AACA,2CADA;AAEA,mBAFA;AAGA,cAHA;AAIA;AACA;AACA;AACA;;AAEA,SAHA,MAGA;AACA;AACA,oBADA;AAEA,sBAFA;AAGA,yCAHA;AAIA,mDAJA;;AAMA;AACA,oBADA;AAEA,sBAFA;AAGA,yCAHA;AAIA,mDAJA;;AAMA;AACA,oBADA;AAEA,sBAFA;AAGA,yCAHA;AAIA,mDAJA;;AAMA;AACA,OA7BA;;AA+BA;AACA;AACA;AACA;AACA;AACA,GApFA;AAqFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAbA;AAcA;AACA;AACA;AACA;AACA,wBADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA;AACA,KAzBA;AA0BA;AACA;AACA;AACA,yBADA;AAEA,mBAFA;AAGA,eAHA,mBAGA,CAHA,EAGA;AACA;AACA;AACA;AACA,SAPA;;AASA,KArCA;AAsCA;AACA;AACA,gBADA;AAEA,iCAFA;AAGA;AACA;AACA,SALA;;AAOA,KA9CA;AA+CA;AACA;AACA;AACA,yBADA;AAEA,mBAFA;AAGA,eAHA,mBAGA,CAHA,EAGA;AACA;AACA;AACA;AACA,SAPA;;AASA,KA1DA;AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAtEA;AAuEA;AACA;AACA;AACA;AACA;AACA;AACA,2CADA;AAEA,wBAFA;AAGA,yEAHA;AAIA;AACA,8BADA;AAEA,kDAFA;AAGA,4BAHA;AAIA,+BAJA;AAKA,oCALA;AAMA,sBANA,EAJA;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCADA;;AAGA,eAJA,EAIA,IAJA;AAKA,aAfA,MAeA;AACA;AACA;AACA,WA/BA;;AAiCA,OApCA,MAoCA;AACA;AACA;AACA;AACA,4CADA;AAEA,iEAFA;AAGA,sBAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAjBA;;AAmBA;AACA,KApIA,EArFA,E;;;;;;;;;;;;;AClDA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,sBAAsB;AAC/B;AACA,sBAAsB,6BAA6B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,yBAAyB,mBAAmB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa,yBAAyB;AACtC;AACA,kCAAkC,aAAa;AAC/C;AACA,gCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,6BAA6B;AAC7B,uBAAuB;AACvB;AACA;AACA;AACA,gCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,mCAAmC,oCAAoC;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,+BAA+B;AAC/B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa,SAAS,wBAAwB,OAAO,qBAAqB,EAAE;AAC5E;AACA,0BAA0B,2BAA2B;AACrD;AACA;AACA;AACA;AACA,4BAA4B,wBAAwB;AACpD,yBAAyB;AACzB,mBAAmB;AACnB;AACA;AACA;AACA;AACA,mBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,iCAAiC,0BAA0B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,uBAAuB,SAAS,yCAAyC,EAAE;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,0BAA0B;AAChD;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,yBAAyB;AACzB,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,wBAAwB;AAClD,uBAAuB;AACvB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,+BAA+B;AACjD;AACA;AACA,WAAW,0BAA0B;AACrC,sBAAsB,SAAS,iCAAiC,EAAE;AAClE;AACA;AACA;AACA;AACA;AACA","file":"pages/write/write.js","sourcesContent":["import 'uni-pages';\nimport pageFactory from 'mpvue-page-factory'\n    import App from './pages/write/write.vue'\n    Page(pageFactory(App))","import { render, staticRenderFns } from \"./write.vue?vue&type=template&id=3b6447ae&\"\nimport script from \"./write.vue?vue&type=script&lang=js&\"\nexport * from \"./write.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../ChromeDownLoad/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\ChromeDownLoad\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('3b6447ae', component.options)\n    } else {\n      api.reload('3b6447ae', component.options)\n    }\n    module.hot.accept(\"./write.vue?vue&type=template&id=3b6447ae&\", function () {\n      api.rerender('3b6447ae', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"A/my/readbook/client/pages/write/write.vue\"\nexport default component.exports","import mod from \"-!../../../../../../ChromeDownLoad/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../ChromeDownLoad/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../ChromeDownLoad/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../../../../../ChromeDownLoad/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../ChromeDownLoad/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../ChromeDownLoad/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../ChromeDownLoad/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../ChromeDownLoad/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../ChromeDownLoad/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--18-0!../../../../../../ChromeDownLoad/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../ChromeDownLoad/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../ChromeDownLoad/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=script&lang=js&\"","export * from \"-!../../../../../../ChromeDownLoad/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../ChromeDownLoad/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../ChromeDownLoad/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../ChromeDownLoad/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../ChromeDownLoad/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=template&id=3b6447ae&\"","<template>\n\t<view class=\"wrap\" v-if=\"version == '1'\">\n\t\t<view  class=\"write_title\">\n\t\t\t<input type=\"text\" v-model=\"title\"  placeholder=\"请输入标题\"/>\n\t\t</view>\n\t\t<!-- 内容展示区 -->\n\t\t<view class=\"artList\">\n\t\t\t<block v-for=\"(item, index) in artList\" :key=\"index\">\n\t\t\t\t<view class=\"item\" v-if=\"item.type == 'image'\">\n\t\t\t\t\t<image :src=\"item.content\" :data-index=\"index\" mode=\"widthFix\" @tap=\"removeImg\"></image>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"item\" v-if=\"item.type == 'text'\">\n\t\t\t\t\t<textarea :value=\"item.content\" placeholder=\"\" v-model=\"artList[index].content\" />\n\t\t\t\t\t<view :data-index=\"index\" class=\"deleteText\" @tap=\"deleteText\">删除</view>\n\t\t\t\t</view>.\n\t\t\t</block>\n\t\t</view>\n\t\t<!-- 输入区 -->\n\t\t<form @submit=\"submit\">\n\t\t\t<view class=\"inputArea\">\n\t\t\t\t<view class=\"addImg\" @tap=\"addImg\">+图片</view>\n\t\t\t\t<view class=\"addText\">\n\t\t\t\t\t<textarea name=\"artText\" maxlength=\"-1\" v-model=\"inputContent\" placeholder=\"请输入文本\" />\n\t\t\t\t\t<button type=\"primary\" form-type=\"submit\">添加</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</form>\n\t\t<!-- 选择分类 -->\n\t\t<view class=\"art-cate\">\n\t\t\t<view>文章分类</view>\n\t\t\t<view class=\"\">\n\t\t\t\t<picker mode=\"selector\" :range=\"caties\" @change=\"cateChange\">\n\t\t\t\t\t<view>{{caties[currentCateIndex]}}</view>\n\t\t\t\t</picker>\n\t\t\t</view>\n\t\t</view>\n\t\t<!-- 提交按钮 -->\n\t\t<view class=\"submitNow\" v-if=\"artList.length > 0\" @tap=\"submitNow\">发布</view>\n\t</view>\r\n\t<view class=\"grace-padding\" v-else>\r\n\t\t<view class=\"waittext\">\r\n\t\t\t<led :mode=\"3\"></led>\r\n\t\t</view>\r\n\t</view>\n</template>\n\n<script>\r\nimport led from '../../components/mehaotian-numled/mehaotian-numled.vue';\nvar _self, loginRes;\nvar signModel = require('../../commons/sign.js');\nexport default {\r\n\tcomponents: {\r\n\t\tled\r\n\t},\n\tdata() {\n\t\treturn {\r\n\t\t\tarr: [1, 2, 3, 4, 5, 6, 7, 8, 9, 0],\r\n\t\t\tversion:'0',\n\t\t\ttitle:'',\n\t\t\tartList:[],\n\t\t\tinputContent:'',\n\t\t\tneedUploadImg:[],\n\t\t\tuploadIndex:0,\n\t\t\t\n\t\t\tcaties : ['点击选择'],\n\t\t\tcurrentCateIndex:0,\n\t\t\tcatiesFromApi:[],\n\t\t\t// 记录真实选择的api接口数据的分类id\n\t\t\tsedCateIndex  : 0\n\t\t}\n\t},\n\tonLoad : function() {\r\n\t\tsetTimeout(() => {\r\n\t\t\tthis.arr = [0, 9, 8, 7, 6, 5, 4, 3, 2, 1];\r\n\t\t}, 2000);\n\t\t_self = this;\t\t\n\t\tloginRes = this.checkLogin('../write/write', '2');\n\t\tif(!loginRes){return false;}\n\t\t// 签名\n\t\tsignModel.sign(_self.apiServer);\n\t\t// 加载文章分类\n\t\tuni.request({\n\t\t\turl: this.apiServer+'category&m=index',\n\t\t\tmethod: 'GET',\n\t\t\tsuccess: res => {\n\t\t\t\tif(res.data.status == 'ok'){\n\t\t\t\t\t// 把数据格式整理为 picker 支持的格式 ['分类名', ...]\n\t\t\t\t\tvar categories = res.data.data;\n\t\t\t\t\tfor(var k in categories){\n\t\t\t\t\t\t_self.caties.push(categories[k]);\n\t\t\t\t\t}\n\t\t\t\t\t// 记录分类信息\n\t\t\t\t\t_self.catiesFromApi = categories;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\tonShow:function(){\r\n\t\tuni.request({\r\n\t\t    url: this.apiServer + 'index&m=index',\r\n\t\t    method: 'GET',\r\n\t\t    data: {},\r\n\t\t    success: res => {\r\n\t\t\t\tthis.version = res.data.data.version;\r\n\t\t\t\tif(res.data.data.version == '0'){\r\n\t\t\t\t\t// uni.hideTabBar();\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuni.setTabBarItem({\r\n\t\t\t\t\t\tindex: 0,\r\n\t\t\t\t\t\ttext: '首页',\r\n\t\t\t\t\t\t\"iconPath\" : \"static/nav1.png\",\r\n\t\t\t\t\t\t\"selectedIconPath\" : \"static/nav1-a.png\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuni.setTabBarItem({\r\n\t\t\t\t\t\tindex: 1,\r\n\t\t\t\t\t\ttext: '记录',\r\n\t\t\t\t\t\t\"iconPath\" : \"static/nav2.png\",\r\n\t\t\t\t\t\t\"selectedIconPath\" : \"static/nav2-a.png\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tuni.setTabBarItem({\r\n\t\t\t\t\t\tindex: 2,\r\n\t\t\t\t\t\ttext: '我的',\r\n\t\t\t\t\t\t\"iconPath\" : \"static/nav3.png\",\r\n\t\t\t\t\t\t\"selectedIconPath\" : \"static/nav3-a.png\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t});\r\n\t\t// console.log();\n\t\tloginRes = this.checkLogin('../write/write', '2');\n\t\tif(!loginRes){return false;}\n\t\t// 重新请签名\n\t\tsignModel.sign(_self.apiServer);\n\t},\n\tmethods:{\n\t\tcateChange : function(e){\n\t\t\tvar sedIndex = e.detail.value;\n\t\t\tthis.currentCateIndex = sedIndex;\n\t\t\t// 获取选择的分类名称\n\t\t\tif(sedIndex < 1){return ;}\n\t\t\tvar cateName = this.caties[sedIndex];\n\t\t\tfor(var k in this.catiesFromApi){\n\t\t\t\tif(cateName == this.catiesFromApi[k]){\n\t\t\t\t\tthis.sedCateIndex = k;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tsubmit : function(res){\n\t\t\tvar content = res.detail.value.artText;\n\t\t\tif(content.length<1){\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle:'请输入内容',\n\t\t\t\t\ticon:'none'\n\t\t\t\t});\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\tthis.artList.push({'type':'text','content':content})\n\t\t\tthis.inputContent = '';\n\t\t},\n\t\tdeleteText :function(i){\n\t\t\tvar index = i.currentTarget.dataset.index;\n\t\t\tuni.showModal({\n\t\t\t\tcontent:\"确定要删除吗\",\n\t\t\t\ttitle:'提示',\n\t\t\t\tsuccess(e) {\n\t\t\t\t\tif (e.confirm) {\n\t\t\t\t\t\t_self.artList.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\taddImg : function(){\n\t\t\tuni.chooseImage({\n\t\t\t\tcount:1,\n\t\t\t\tsizeType:['compressed '],\n\t\t\t\t success:function(res){\n\t\t\t\t \t_self.artList.push({'type':'image','content':res.tempFilePaths[0]});\n\t\t\t\t }\n\t\t\t})\n\t\t},\n\t\tremoveImg : function(i){\n\t\t\tvar index = i.currentTarget.dataset.index;\n\t\t\tuni.showModal({\n\t\t\t\tcontent:\"确定要删除吗\",\n\t\t\t\ttitle:'提示',\n\t\t\t\tsuccess(e) {\n\t\t\t\t\tif (e.confirm) {\n\t\t\t\t\t\t_self.artList.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tsubmitNow : function(){\n\t\t\t// 数据验证\n\t\t\tif(this.title.length < 1){uni.showToast({title:'请输入标题', icon:\"none\"}); return ;}\n\t\t\tif(this.artList.length < 1){uni.showToast({title:'请填写文章内容', icon:\"none\"}); return ;}\n\t\t\tif(this.sedCateIndex < 1){uni.showToast({title:'请选择分类', icon:\"none\"}); return ;}\n\t\t\tfor(var i = 0; i < this.artList.length; i++){\n\t\t\t\tif(this.artList[i].type == 'image'){\n\t\t\t\t\tthis.needUploadImg.push({\"tmpurl\" : this.artList[i].content , \"indexID\" : i});\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.uploadImg();\n\t\t},\n\t\tuploadImg : function(){\n\t\t\t// 如果没有图片 或者已经上传完成 则执行提交\n\t\t\tif(this.needUploadImg.length < 1 || this.uploadIndex >=  this.needUploadImg.length){\n\t\t\t\tuni.showLoading({title:\"正在提交\"});\n\t\t\t\tvar sign = uni.getStorageSync('sign');\n\t\t\t\tuni.request({\n\t\t\t\t\turl: this.apiServer + 'art&m=add',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\theader: {'content-type' : \"application/x-www-form-urlencoded\"},\n\t\t\t\t\tdata:{\n\t\t\t\t\t\ttitle   : _self.title,\n\t\t\t\t\t\tcontent : JSON.stringify(_self.artList),\n\t\t\t\t\t\tuid     : loginRes[0],\n\t\t\t\t\t\trandom  : loginRes[1],\n\t\t\t\t\t\tcate    : _self.sedCateIndex,\n\t\t\t\t\t\tsign    : sign\n\t\t\t\t\t},\n\t\t\t\t\tsuccess:function(res){\n\t\t\t\t\t\tif(res.data.status == 'ok'){\n\t\t\t\t\t\t\tuni.showToast({title:\"提交成功\", icon:\"none\"});\n\t\t\t\t\t\t\t_self.artList = [];\n\t\t\t\t\t\t\t// 清空数据\n\t\t\t\t\t\t\tsignModel.sign(_self.apiServer);\n\t\t\t\t\t\t\t// 防止数据缓存\n\t\t\t\t\t\t\t_self.currentCateIndex = 0;\n\t\t\t\t\t\t\t_self.sedCateIndex     = 0;\n\t\t\t\t\t\t\t_self.needUploadImg    = [];\n\t\t\t\t\t\t\t_self.title            = '';\n\t\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\t\turl:'../my/my'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tuni.showToast({title:res.data.data, icon:\"none\"});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\t// 上传图片\n\t\t\t\tuni.showLoading({title:\"上传图片\"});\n\t\t\t\tvar upload = uni.uploadFile({\n\t\t\t\t\turl:_self.apiServer+'uploadimg',\n\t\t\t\t\tfilePath:_self.needUploadImg[_self.uploadIndex].tmpurl,\n\t\t\t\t\tname:'file',\n\t\t\t\t\tsuccess: (uploadFileRes) => {\n\t\t\t\t\t\tconsole.log(uploadFileRes);\n\t\t\t\t\t\tuploadFileRes = JSON.parse(uploadFileRes.data);\n\t\t\t\t\t\tif(uploadFileRes.status != 'ok'){\n\t\t\t\t\t\t\tuni.showToast({title:\"上传图片失败,请重试!\", icon:\"none\"});\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// 将已经上传的文件地址赋值给文章数据\n\t\t\t\t\t\tvar index = _self.needUploadImg[_self.uploadIndex].indexID;\n\t\t\t\t\t\t_self.artList[index].content = _self.staticServer + uploadFileRes.data;\n\t\t\t\t\t\t_self.uploadIndex ++;\n\t\t\t\t\t\t// 递归上传\n\t\t\t\t\t\tsetTimeout(function(){_self.uploadImg();}, 1000);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\t\n\t}\n}\n</script>\n\n<style>\n\n</style>\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.version == \"1\"\n    ? _c(\n        \"view\",\n        { staticClass: \"wrap\" },\n        [\n          _c(\"view\", { staticClass: \"write_title\" }, [\n            _c(\"input\", {\n              directives: [\n                {\n                  name: \"model\",\n                  rawName: \"v-model\",\n                  value: _vm.title,\n                  expression: \"title\"\n                }\n              ],\n              attrs: {\n                type: \"text\",\n                placeholder: \"请输入标题\",\n                eventid: \"b167ff6e-0\"\n              },\n              domProps: { value: _vm.title },\n              on: {\n                input: function($event) {\n                  if ($event.target.composing) {\n                    return\n                  }\n                  _vm.title = $event.target.value\n                }\n              }\n            })\n          ]),\n          _c(\n            \"view\",\n            { staticClass: \"artList\" },\n            _vm._l(_vm.artList, function(item, index) {\n              return _c(\"block\", { key: index }, [\n                item.type == \"image\"\n                  ? _c(\"view\", { staticClass: \"item\" }, [\n                      _c(\"image\", {\n                        attrs: {\n                          src: item.content,\n                          \"data-index\": index,\n                          mode: \"widthFix\",\n                          eventid: \"b167ff6e-1-\" + index\n                        },\n                        on: { tap: _vm.removeImg }\n                      })\n                    ])\n                  : _vm._e(),\n                item.type == \"text\"\n                  ? _c(\"view\", { staticClass: \"item\" }, [\n                      _c(\"textarea\", {\n                        directives: [\n                          {\n                            name: \"model\",\n                            rawName: \"v-model\",\n                            value: _vm.artList[index].content,\n                            expression: \"artList[index].content\"\n                          }\n                        ],\n                        attrs: {\n                          value: item.content,\n                          placeholder: \"\",\n                          eventid: \"b167ff6e-2-\" + index\n                        },\n                        domProps: { value: _vm.artList[index].content },\n                        on: {\n                          input: function($event) {\n                            if ($event.target.composing) {\n                              return\n                            }\n                            _vm.artList[index].content = $event.target.value\n                          }\n                        }\n                      }),\n                      _c(\n                        \"view\",\n                        {\n                          staticClass: \"deleteText\",\n                          attrs: {\n                            \"data-index\": index,\n                            eventid: \"b167ff6e-3-\" + index\n                          },\n                          on: { tap: _vm.deleteText }\n                        },\n                        [_vm._v(\"删除\")]\n                      )\n                    ])\n                  : _vm._e(),\n                _vm._v(\".\")\n              ])\n            })\n          ),\n          _c(\n            \"form\",\n            { attrs: { eventid: \"b167ff6e-6\" }, on: { submit: _vm.submit } },\n            [\n              _c(\"view\", { staticClass: \"inputArea\" }, [\n                _c(\n                  \"view\",\n                  {\n                    staticClass: \"addImg\",\n                    attrs: { eventid: \"b167ff6e-4\" },\n                    on: { tap: _vm.addImg }\n                  },\n                  [_vm._v(\"+图片\")]\n                ),\n                _c(\n                  \"view\",\n                  { staticClass: \"addText\" },\n                  [\n                    _c(\"textarea\", {\n                      directives: [\n                        {\n                          name: \"model\",\n                          rawName: \"v-model\",\n                          value: _vm.inputContent,\n                          expression: \"inputContent\"\n                        }\n                      ],\n                      attrs: {\n                        name: \"artText\",\n                        maxlength: \"-1\",\n                        placeholder: \"请输入文本\",\n                        eventid: \"b167ff6e-5\"\n                      },\n                      domProps: { value: _vm.inputContent },\n                      on: {\n                        input: function($event) {\n                          if ($event.target.composing) {\n                            return\n                          }\n                          _vm.inputContent = $event.target.value\n                        }\n                      }\n                    }),\n                    _c(\n                      \"button\",\n                      { attrs: { type: \"primary\", \"form-type\": \"submit\" } },\n                      [_vm._v(\"添加\")]\n                    )\n                  ],\n                  1\n                )\n              ])\n            ]\n          ),\n          _c(\"view\", { staticClass: \"art-cate\" }, [\n            _c(\"view\", [_vm._v(\"文章分类\")]),\n            _c(\n              \"view\",\n              {},\n              [\n                _c(\n                  \"picker\",\n                  {\n                    attrs: {\n                      mode: \"selector\",\n                      range: _vm.caties,\n                      eventid: \"b167ff6e-7\"\n                    },\n                    on: { change: _vm.cateChange }\n                  },\n                  [\n                    _c(\"view\", [\n                      _vm._v(_vm._s(_vm.caties[_vm.currentCateIndex]))\n                    ])\n                  ]\n                )\n              ],\n              1\n            )\n          ]),\n          _vm.artList.length > 0\n            ? _c(\n                \"view\",\n                {\n                  staticClass: \"submitNow\",\n                  attrs: { eventid: \"b167ff6e-8\" },\n                  on: { tap: _vm.submitNow }\n                },\n                [_vm._v(\"发布\")]\n              )\n            : _vm._e()\n        ],\n        1\n      )\n    : _c(\"view\", { staticClass: \"grace-padding\" }, [\n        _c(\n          \"view\",\n          { staticClass: \"waittext\" },\n          [_c(\"led\", { attrs: { mode: 3, mpcomid: \"b167ff6e-0\" } })],\n          1\n        )\n      ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }"],"sourceRoot":""}